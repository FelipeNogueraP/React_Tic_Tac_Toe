# React build pipeline
# Default is self-hosted because some Azure DevOps orgs have no Microsoft-hosted parallelism.
# Set `useMicrosoftHosted` to `true` once your hosted parallelism grant is approved.

trigger:
- main

parameters:
- name: useMicrosoftHosted
  type: boolean
  default: false

variables:
  nodeVersion: '20.x'

pool:
  ${{ if eq(parameters.useMicrosoftHosted, true) }}:
    vmImage: 'ubuntu-latest'
  ${{ else }}:
    name: 'Default'

steps:
- task: NodeTool@0
  inputs:
    versionSpec: $(nodeVersion)
  displayName: Install Node.js

- script: |
    npm ci
    npm run build
  displayName: Install dependencies and build
